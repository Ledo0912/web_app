{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\matej\\\\web_app\\\\frontend\\\\src\\\\pages\\\\NewGamePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./NewGamePage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NewGamePage({\n  user\n}) {\n  _s();\n  const [playerCount, setPlayerCount] = useState(2);\n  const [allUsers, setAllUsers] = useState([]);\n  const [playerNames, setPlayerNames] = useState([\"\", \"\"]);\n  const [searchResults, setSearchResults] = useState({});\n  useEffect(() => {\n    const loadUsers = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/users\");\n        setAllUsers(res.data);\n      } catch (err) {\n        console.error(\"Error loading users:\", err);\n      }\n    };\n    loadUsers();\n  }, []);\n\n  // Adjust number of text fields dynamically\n  useEffect(() => {\n    let arr = [...playerNames];\n    arr.length = playerCount;\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i] === undefined) arr[i] = \"\";\n    }\n    // First player is the logged-in user and locked\n    arr[0] = user.username;\n    setPlayerNames(arr);\n  }, [playerCount]);\n\n  // Handle text input updates\n  const updatePlayerName = (index, value) => {\n    const updated = [...playerNames];\n    updated[index] = value;\n    setPlayerNames(updated);\n\n    // Create search dropdown\n    if (index !== 0) {\n      const filtered = allUsers.filter(u => u.username.toLowerCase().includes(value.toLowerCase()) && u.username !== user.username).slice(0, 5);\n      setSearchResults(prev => ({\n        ...prev,\n        [index]: filtered\n      }));\n    }\n  };\n  const chooseUser = (index, username) => {\n    const updated = [...playerNames];\n    updated[index] = username;\n    setPlayerNames(updated);\n    setSearchResults(prev => ({\n      ...prev,\n      [index]: []\n    }));\n  };\n  const handleSubmit = () => {\n    console.log(\"Match Players:\", playerNames);\n    alert(\"Match created (placeholder).\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-game-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Start a New Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Number of Players:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: playerCount,\n      onChange: e => setPlayerCount(Number(e.target.value)),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 2,\n        children: \"2 Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 3,\n        children: \"3 Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 4,\n        children: \"4 Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"players-section\",\n      children: playerNames.map((name, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Player \", index + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: name,\n          disabled: index === 0 // First player is locked\n          ,\n          placeholder: index === 0 ? \"Logged-in user\" : \"Search user...\",\n          onChange: e => updatePlayerName(index, e.target.value),\n          className: index === 0 ? \"locked\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), searchResults[index] && searchResults[index].length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"autocomplete-list\",\n          children: searchResults[index].map(u => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => chooseUser(index, u.username),\n            children: u.username\n          }, u.username, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"submit-button\",\n      onClick: handleSubmit,\n      children: \"Create Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(NewGamePage, \"NU6SPSxEpI26Dr6j2xGC6Qp0f0Q=\");\n_c = NewGamePage;\nexport default NewGamePage;\nvar _c;\n$RefreshReg$(_c, \"NewGamePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","NewGamePage","user","_s","playerCount","setPlayerCount","allUsers","setAllUsers","playerNames","setPlayerNames","searchResults","setSearchResults","loadUsers","res","get","data","err","console","error","arr","length","i","undefined","username","updatePlayerName","index","value","updated","filtered","filter","u","toLowerCase","includes","slice","prev","chooseUser","handleSubmit","log","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","Number","target","map","name","type","disabled","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/matej/web_app/frontend/src/pages/NewGamePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./NewGamePage.css\";\r\n\r\nfunction NewGamePage({ user }) {\r\n  const [playerCount, setPlayerCount] = useState(2);\r\n  const [allUsers, setAllUsers] = useState([]);\r\n  const [playerNames, setPlayerNames] = useState([\"\", \"\"]);\r\n  const [searchResults, setSearchResults] = useState({});\r\n\r\n  useEffect(() => {\r\n    const loadUsers = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:5000/api/users\");\r\n        setAllUsers(res.data);\r\n      } catch (err) {\r\n        console.error(\"Error loading users:\", err);\r\n      }\r\n    };\r\n    loadUsers();\r\n  }, []);\r\n\r\n  // Adjust number of text fields dynamically\r\n  useEffect(() => {\r\n    let arr = [...playerNames];\r\n    arr.length = playerCount;\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (arr[i] === undefined) arr[i] = \"\";\r\n    }\r\n    // First player is the logged-in user and locked\r\n    arr[0] = user.username;\r\n    setPlayerNames(arr);\r\n  }, [playerCount]);\r\n\r\n  // Handle text input updates\r\n  const updatePlayerName = (index, value) => {\r\n    const updated = [...playerNames];\r\n    updated[index] = value;\r\n    setPlayerNames(updated);\r\n\r\n    // Create search dropdown\r\n    if (index !== 0) {\r\n      const filtered = allUsers\r\n        .filter(\r\n          (u) =>\r\n            u.username.toLowerCase().includes(value.toLowerCase()) &&\r\n            u.username !== user.username\r\n        )\r\n        .slice(0, 5);\r\n\r\n      setSearchResults((prev) => ({\r\n        ...prev,\r\n        [index]: filtered,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const chooseUser = (index, username) => {\r\n    const updated = [...playerNames];\r\n    updated[index] = username;\r\n    setPlayerNames(updated);\r\n\r\n    setSearchResults((prev) => ({\r\n      ...prev,\r\n      [index]: [],\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    console.log(\"Match Players:\", playerNames);\r\n    alert(\"Match created (placeholder).\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"new-game-page\">\r\n      <h1>Start a New Game</h1>\r\n\r\n      {/* Select player count */}\r\n      <label>Number of Players:</label>\r\n      <select\r\n        value={playerCount}\r\n        onChange={(e) => setPlayerCount(Number(e.target.value))}\r\n      >\r\n        <option value={2}>2 Players</option>\r\n        <option value={3}>3 Players</option>\r\n        <option value={4}>4 Players</option>\r\n      </select>\r\n\r\n      {/* Player input fields */}\r\n      <div className=\"players-section\">\r\n        {playerNames.map((name, index) => (\r\n          <div key={index} className=\"player-input-wrapper\">\r\n            <label>Player {index + 1}</label>\r\n            <input\r\n              type=\"text\"\r\n              value={name}\r\n              disabled={index === 0} // First player is locked\r\n              placeholder={index === 0 ? \"Logged-in user\" : \"Search user...\"}\r\n              onChange={(e) => updatePlayerName(index, e.target.value)}\r\n              className={index === 0 ? \"locked\" : \"\"}\r\n            />\r\n\r\n            {/* Autocomplete dropdown */}\r\n            {searchResults[index] && searchResults[index].length > 0 && (\r\n              <ul className=\"autocomplete-list\">\r\n                {searchResults[index].map((u) => (\r\n                  <li\r\n                    key={u.username}\r\n                    onClick={() => chooseUser(index, u.username)}\r\n                  >\r\n                    {u.username}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <button className=\"submit-button\" onClick={handleSubmit}>\r\n        Create Game\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewGamePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}